<%
  var pageTitle   = 'Happiness ‚Äî Lizzyland';
  var pageDesc    = 'New experiences, beautiful things, and the life you deserve.';
  var currentPage = 'shop';
%>
<%- include('partials/header') %>

<style>
  /* ‚îÄ‚îÄ Remove icons from filter tabs ‚îÄ‚îÄ */
  .ll-filter-tab { font-size: 0.82rem; }

  /* ‚îÄ‚îÄ Tighter affiliates ‚Äî small strip ‚îÄ‚îÄ */
  .ll-affiliates-small {
    background: var(--sand);
    padding: 2.5rem 2rem;
    border-top: 1px solid var(--sand-deep);
  }
  .ll-affiliates-small-inner {
    max-width: 1100px; margin: 0 auto;
    display: flex; align-items: center;
    gap: 1rem; flex-wrap: wrap;
    justify-content: space-between;
  }
  .ll-affiliates-small-label {
    font-family: var(--font-display);
    font-size: 1rem; font-weight: 600;
    color: var(--warm-dark); flex-shrink: 0;
  }
  .ll-affiliates-small-links {
    display: flex; gap: 0.75rem; flex-wrap: wrap;
  }
  .ll-affiliate-pill {
    display: inline-block;
    padding: 0.45rem 1.1rem;
    background: var(--white);
    border: 1.5px solid var(--sand-deep);
    border-radius: var(--radius-xl);
    font-size: 0.82rem; color: var(--text-soft);
    text-decoration: none; transition: all 0.2s;
    font-weight: 500;
  }
  .ll-affiliate-pill:hover {
    border-color: var(--ocean); color: var(--ocean);
  }

  /* ‚îÄ‚îÄ Sail Away ‚îÄ‚îÄ */
  .ll-sail-away {
    background: linear-gradient(160deg, #0a3d52 0%, #0d5c6b 45%, #1a7a6e 100%);
    padding: 5rem 2rem;
    position: relative; overflow: hidden;
  }
  .ll-sail-away::before {
    content: '';
    position: absolute; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='20' viewBox='0 0 100 20'%3E%3Cpath d='M0 10 Q25 0 50 10 Q75 20 100 10' stroke='rgba(255,255,255,0.04)' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
    background-size: 100px 20px; background-repeat: repeat; opacity: 0.6;
  }
  .ll-sail-inner { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
  .ll-sail-heading { text-align: center; margin-bottom: 3rem; }
  .ll-sail-eyebrow {
    font-family: var(--font-accent); font-style: italic;
    font-size: 0.95rem; color: var(--gold-light);
    letter-spacing: 0.15em; opacity: 0.8; margin-bottom: 0.5rem;
  }
  .ll-sail-title {
    font-family: var(--font-display); font-style: italic;
    font-size: clamp(2rem, 5vw, 3.2rem); font-weight: 400;
    color: var(--white); margin-bottom: 0.5rem; line-height: 1.15;
  }
  .ll-sail-sub {
    font-family: var(--font-accent); font-style: italic;
    font-size: 1.05rem; color: rgba(255,255,255,0.6);
    max-width: 520px; margin: 0 auto;
  }
  .ll-sail-grid {
    display: grid; grid-template-columns: repeat(3,1fr); gap: 1.5rem;
  }
  .ll-yacht-card {
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(255,255,255,0.13);
    border-radius: var(--radius-md); overflow: hidden;
    transition: all 0.3s; text-decoration: none; display: block;
  }
  .ll-yacht-card:hover {
    transform: translateY(-6px);
    background: rgba(255,255,255,0.11);
    border-color: rgba(232,184,75,0.45);
    box-shadow: 0 20px 48px rgba(0,0,0,0.28);
  }
  .ll-yacht-img {
    height: 190px;
    background: linear-gradient(135deg, #0a4a5c, #1a6a7a);
    display: flex; align-items: center; justify-content: center;
    font-size: 4.5rem;
  }
  .ll-yacht-body { padding: 1.4rem; }
  .ll-yacht-tag {
    font-size: 0.68rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.15em;
    color: var(--gold-light); margin-bottom: 0.4rem; opacity: 0.8;
  }
  .ll-yacht-name {
    font-family: var(--font-display); font-size: 1.1rem;
    color: var(--white); margin-bottom: 0.4rem; font-weight: 600;
  }
  .ll-yacht-desc {
    font-size: 0.83rem; color: rgba(255,255,255,0.52);
    line-height: 1.6; margin-bottom: 1rem;
  }
  .ll-yacht-detail { display: flex; gap: 0.75rem; flex-wrap: wrap; margin-bottom: 1rem; }
  .ll-yacht-pip { font-size: 0.73rem; color: rgba(255,255,255,0.4); }
  .ll-yacht-cta {
    display: inline-block; padding: 0.5rem 1.25rem;
    border: 1.5px solid rgba(232,184,75,0.55);
    border-radius: var(--radius-xl); color: var(--gold-light);
    font-size: 0.8rem; font-weight: 600; transition: all 0.2s;
  }
  .ll-yacht-card:hover .ll-yacht-cta {
    background: var(--gold); border-color: var(--gold); color: var(--warm-dark);
  }
  .ll-sail-footer { text-align: center; margin-top: 2.5rem; }
  .ll-sail-browse {
    display: inline-block; padding: 0.8rem 2.25rem;
    background: rgba(255,255,255,0.1);
    border: 1.5px solid rgba(255,255,255,0.28);
    border-radius: var(--radius-xl); color: var(--white);
    font-weight: 600; font-size: 0.92rem; transition: all 0.25s;
    text-decoration: none;
  }
  .ll-sail-browse:hover { background: var(--white); color: var(--warm-dark); }

  /* ‚îÄ‚îÄ Expand Your Horizons ‚îÄ‚îÄ */
  .ll-horizons {
    background: var(--sand-light); padding: 5rem 2rem;
    position: relative;
  }
  .ll-horizons::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--gold), var(--coral), var(--gold));
  }
  .ll-horizons-inner { max-width: 1200px; margin: 0 auto; }
  .ll-horizons-heading { text-align: center; margin-bottom: 3rem; }
  .ll-horizons-eyebrow {
    font-family: var(--font-accent); font-style: italic;
    font-size: 0.95rem; color: var(--gold);
    letter-spacing: 0.15em; opacity: 0.8; margin-bottom: 0.5rem;
  }
  .ll-horizons-title {
    font-family: var(--font-display); font-style: italic;
    font-size: clamp(2rem, 5vw, 3.2rem); font-weight: 400;
    color: var(--warm-dark); margin-bottom: 0.5rem;
  }
  .ll-horizons-sub {
    font-family: var(--font-accent); font-style: italic;
    font-size: 1.05rem; color: var(--text-muted);
    max-width: 520px; margin: 0 auto;
  }
  .ll-villas-grid {
    display: grid; grid-template-columns: repeat(3,1fr); gap: 1.75rem;
  }
  .ll-villa-card {
    background: var(--white); border-radius: var(--radius-md);
    overflow: hidden; box-shadow: var(--shadow-sm);
    border: 1.5px solid var(--sand-deep); transition: all 0.35s;
    text-decoration: none; display: block;
  }
  .ll-villa-card:hover {
    transform: translateY(-7px); box-shadow: var(--shadow-lg);
    border-color: var(--gold);
  }
  .ll-villa-img {
    height: 200px;
    background: linear-gradient(135deg, #c8a882, #e8c98a);
    display: flex; align-items: center; justify-content: center;
    font-size: 4.5rem; position: relative;
  }
  .ll-villa-badge {
    position: absolute; bottom: 0.75rem; left: 0.75rem;
    background: rgba(45,27,14,0.72); color: var(--sand-light);
    font-size: 0.7rem; font-weight: 600; letter-spacing: 0.08em;
    text-transform: uppercase; padding: 0.28rem 0.75rem;
    border-radius: var(--radius-xl);
  }
  .ll-villa-body { padding: 1.4rem 1.5rem 1.75rem; }
  .ll-villa-name {
    font-family: var(--font-display); font-size: 1.1rem;
    font-weight: 600; color: var(--warm-dark); margin-bottom: 0.4rem;
  }
  .ll-villa-desc {
    font-size: 0.84rem; color: var(--text-soft);
    line-height: 1.65; margin-bottom: 1rem;
  }
  .ll-villa-features { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
  .ll-villa-feature {
    font-size: 0.73rem; color: var(--text-muted);
    background: var(--sand); padding: 0.2rem 0.6rem;
    border-radius: var(--radius-xl);
  }
  .ll-villa-cta {
    font-size: 0.84rem; font-weight: 600; color: var(--ocean);
    border-bottom: 1.5px solid var(--ocean-pale); padding-bottom: 1px;
    transition: all 0.2s;
  }
  .ll-villa-card:hover .ll-villa-cta { color: var(--coral); border-color: var(--coral-light); }
  .ll-horizons-footer { text-align: center; margin-top: 2.75rem; }
  .ll-horizons-browse {
    display: inline-block; padding: 0.8rem 2.25rem;
    background: var(--ocean); color: var(--white);
    border-radius: var(--radius-xl); font-weight: 600;
    font-size: 0.92rem; transition: all 0.25s; text-decoration: none;
    box-shadow: 0 4px 16px rgba(26,138,122,0.22);
  }
  .ll-horizons-browse:hover { background: var(--coral); transform: translateY(-2px); }

  @media (max-width: 900px) {
    .ll-sail-grid, .ll-villas-grid { grid-template-columns: 1fr; max-width: 460px; margin: 0 auto; }
  }
</style>

  <!-- ‚ïê‚ïê HERO ‚ïê‚ïê -->
  <section class="ll-shop-hero">
    <img src="/images/shop-banner.jpg" alt="Happiness" class="ll-shop-hero-img" onerror="this.style.display='none'">
    <div class="ll-shop-hero-overlay"></div>
    <div class="ll-shop-hero-inner">
      <div style="font-family:var(--font-accent);font-style:italic;font-size:0.9rem;color:var(--gold-light);letter-spacing:0.15em;opacity:0.8;margin-bottom:0.4rem;">‚ú¶ Door Three ¬∑ New Experiences ‚ú¶</div>
      <h1>Happiness</h1>
      <p>Beautiful things, extraordinary places, and everything that makes life feel like a permanent holiday.</p>
    </div>
  </section>

  <!-- ‚ïê‚ïê PRODUCT SECTION ‚ïê‚ïê -->
  <div class="ll-shop-section">
    <div class="ll-filter-tabs">
      <a href="/shop"                 class="ll-filter-tab <%= (!currentCat || currentCat === 'all') ? 'active' : '' %>">All</a>
      <a href="/shop?cat=shirts"      class="ll-filter-tab <%= currentCat === 'shirts'      ? 'active' : '' %>">Shirts</a>
      <a href="/shop?cat=hoodies"     class="ll-filter-tab <%= currentCat === 'hoodies'     ? 'active' : '' %>">Hoodies</a>
      <a href="/shop?cat=footwear"    class="ll-filter-tab <%= currentCat === 'footwear'    ? 'active' : '' %>">Footwear</a>
      <a href="/shop?cat=towels"      class="ll-filter-tab <%= currentCat === 'towels'      ? 'active' : '' %>">Towels</a>
      <a href="/shop?cat=homewares"   class="ll-filter-tab <%= currentCat === 'homewares'   ? 'active' : '' %>">Home</a>
      <a href="/shop?cat=accessories" class="ll-filter-tab <%= currentCat === 'accessories' ? 'active' : '' %>">Accessories</a>
    </div>

    <div class="ll-section-title" style="margin-top:2rem;">
      <% if (currentCat && currentCat !== 'all') { %>
        <%= currentCat.charAt(0).toUpperCase() + currentCat.slice(1) %>
      <% } else { %>
        The Collection
      <% } %>
    </div>
    <p class="ll-section-sub">Ships worldwide ¬∑ Print-on-demand ¬∑ Made when you order</p>

    <% if (products && products.length > 0) { %>
    <div class="ll-products-grid">
      <% products.forEach(function(product) { %>
      <div class="ll-product-card">
        <div class="ll-product-img">
          <% if (product.thumbnail_url) { %>
            <img src="<%= product.thumbnail_url %>" alt="<%= product.name %>">
          <% } else { %>
            <span class="product-emoji">üõçÔ∏è</span>
          <% } %>
        </div>
        <div class="ll-product-info">
          <div class="ll-product-name"><%= product.name %></div>
          <div class="ll-product-variants"><%= product.variant_count %> variant<%= product.variant_count !== 1 ? 's' : '' %></div>
          <div class="ll-product-footer">
            <div class="ll-product-price">
              <% if (product.price) { %>From $<%= product.price.toFixed(2) %><% } else { %>‚Äî<% } %>
            </div>
            <button class="ll-add-btn" data-product-id="<%= product.id %>" data-product-name="<%= product.name %>" title="Add to cart">+</button>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } else { %>
    <div class="ll-loading">
      <div class="ll-loading-spinner"></div>
      <p>Loading products...</p>
    </div>
    <% } %>
  </div>

  <!-- ‚ïê‚ïê SMALL AFFILIATES STRIP ‚ïê‚ïê -->
  <section class="ll-affiliates-small">
    <div class="ll-affiliates-small-inner">
      <div class="ll-affiliates-small-label">Treat Yourself ‚ú®</div>
      <div class="ll-affiliates-small-links">
        <a href="/health#block-sauna" class="ll-affiliate-pill">Infrared Sauna</a>
        <a href="/health#block-massage" class="ll-affiliate-pill">Massage Chair</a>
        <a href="/health#block-vibration" class="ll-affiliate-pill">Vibration Plate</a>
        <a href="/health" class="ll-affiliate-pill">All Wellness ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê SAIL AWAY ‚ïê‚ïê -->
  <section class="ll-sail-away">
    <div class="ll-sail-inner">
      <div class="ll-sail-heading">
        <div class="ll-sail-eyebrow">‚ú¶ Charter the Dream ‚ú¶</div>
        <h2 class="ll-sail-title">Sail Away</h2>
        <p class="ll-sail-sub">Hand-picked yacht charters ‚Äî from sunset escapes to full bareboat adventures.</p>
      </div>
      <div class="ll-sail-grid">
        <a href="#" class="ll-yacht-card">
          <div class="ll-yacht-img">‚õµ</div>
          <div class="ll-yacht-body">
            <div class="ll-yacht-tag">Day Charter</div>
            <div class="ll-yacht-name">Sunset Sailing ‚Äî Cape Town</div>
            <div class="ll-yacht-desc">Private sunset sail around Table Bay. Sundowners, sea breeze, Table Mountain as your backdrop.</div>
            <div class="ll-yacht-detail"><span class="ll-yacht-pip">‚öì Up to 8 guests</span><span class="ll-yacht-pip">üåÖ 3 hours</span></div>
            <span class="ll-yacht-cta">Enquire ‚Üí</span>
          </div>
        </a>
        <a href="#" class="ll-yacht-card">
          <div class="ll-yacht-img">üõ•Ô∏è</div>
          <div class="ll-yacht-body">
            <div class="ll-yacht-tag">Weekend Charter</div>
            <div class="ll-yacht-name">Greek Islands Escape</div>
            <div class="ll-yacht-desc">Hop between secret coves and whitewashed villages. Skipper included or bareboat ‚Äî your call.</div>
            <div class="ll-yacht-detail"><span class="ll-yacht-pip">‚öì Up to 10 guests</span><span class="ll-yacht-pip">üìÖ 3‚Äì7 days</span></div>
            <span class="ll-yacht-cta">Enquire ‚Üí</span>
          </div>
        </a>
        <a href="#" class="ll-yacht-card">
          <div class="ll-yacht-img">üåä</div>
          <div class="ll-yacht-body">
            <div class="ll-yacht-tag">Bareboat Adventure</div>
            <div class="ll-yacht-name">Croatia ‚Äî Dalmatian Week</div>
            <div class="ll-yacht-desc">Seven islands, seven days. The Dalmatian coast at your own pace.</div>
            <div class="ll-yacht-detail"><span class="ll-yacht-pip">‚öì Up to 12 guests</span><span class="ll-yacht-pip">üìÖ 7‚Äì14 days</span></div>
            <span class="ll-yacht-cta">Enquire ‚Üí</span>
          </div>
        </a>
      </div>
      <div class="ll-sail-footer">
        <a href="#" class="ll-sail-browse">Browse All Charters ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê EXPAND YOUR HORIZONS ‚ïê‚ïê -->
  <section class="ll-horizons">
    <div class="ll-horizons-inner">
      <div class="ll-horizons-heading">
        <div class="ll-horizons-eyebrow">‚ú¶ Dream Escapes ‚ú¶</div>
        <h2 class="ll-horizons-title">Expand Your Horizons</h2>
        <p class="ll-horizons-sub">Handpicked villas and retreats. Places Lizzy would actually stay.</p>
      </div>
      <div class="ll-villas-grid">
        <a href="#" class="ll-villa-card">
          <div class="ll-villa-img">üå¥<div class="ll-villa-badge">üá≤üáª Maldives</div></div>
          <div class="ll-villa-body">
            <div class="ll-villa-name">Overwater Villa ‚Äî North Mal√© Atoll</div>
            <div class="ll-villa-desc">Glass floor, private plunge pool, butler service. The kind of place that makes the rest of your life look different.</div>
            <div class="ll-villa-features"><span class="ll-villa-feature">Sleeps 4</span><span class="ll-villa-feature">Private pool</span><span class="ll-villa-feature">House reef</span></div>
            <span class="ll-villa-cta">View Villa ‚Üí</span>
          </div>
        </a>
        <a href="#" class="ll-villa-card">
          <div class="ll-villa-img">üèõÔ∏è<div class="ll-villa-badge">üáÆüáπ Amalfi Coast</div></div>
          <div class="ll-villa-body">
            <div class="ll-villa-name">Cliffside Palazzo ‚Äî Positano</div>
            <div class="ll-villa-desc">Lemon groves, terrazzo tiles, and a view that will rearrange your idea of what's possible in a day.</div>
            <div class="ll-villa-features"><span class="ll-villa-feature">Sleeps 8</span><span class="ll-villa-feature">Private garden</span><span class="ll-villa-feature">Sea views</span></div>
            <span class="ll-villa-cta">View Villa ‚Üí</span>
          </div>
        </a>
        <a href="#" class="ll-villa-card">
          <div class="ll-villa-img">üå∫<div class="ll-villa-badge">üáøüá¶ Camps Bay</div></div>
          <div class="ll-villa-body">
            <div class="ll-villa-name">Clifftop Villa ‚Äî Cape Town</div>
            <div class="ll-villa-desc">Mountain on one side, Atlantic on the other. Because why choose when you can have everything?</div>
            <div class="ll-villa-features"><span class="ll-villa-feature">Sleeps 6</span><span class="ll-villa-feature">Infinity pool</span><span class="ll-villa-feature">Wine cellar</span></div>
            <span class="ll-villa-cta">View Villa ‚Üí</span>
          </div>
        </a>
      </div>
      <div class="ll-horizons-footer">
        <a href="#" class="ll-horizons-browse">Browse All Villas ‚Üí</a>
      </div>
    </div>
  </section>

  <div class="ll-divider">‚ú¶ ¬∑ ‚ú¶ ¬∑ ‚ú¶</div>

<%- include('partials/footer') %>
