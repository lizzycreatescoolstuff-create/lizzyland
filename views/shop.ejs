<%
  var pageTitle   = 'Shop â€” Lizzyland';
  var pageDesc    = 'Tropical lifestyle goods, beach-ready gear, and a few brilliant surprises.';
  var currentPage = 'shop';
%>
<%- include('partials/header') %>

  <!-- â•â• SHOP HERO â•â• -->
  <section class="ll-shop-hero">
    <img
      src="/images/shop-banner.jpg"
      alt="Lizzyland shop â€” tropical goods"
      class="ll-shop-hero-img"
      onerror="this.style.display='none'"
    >
    <div class="ll-shop-hero-overlay"></div>
    <div class="ll-shop-hero-inner">
      <h1>The Shop ğŸŒº</h1>
      <p>Tropical lifestyle goods, beach-ready gear, and a few brilliant surprises.</p>
    </div>
  </section>

  <!-- â•â• MAIN SHOP â€” Categories + Products â•â• -->
  <div class="ll-shop-section">

    <!-- Category filter tabs -->
    <div class="ll-filter-tabs">
      <a href="/shop"                   class="ll-filter-tab <%= (!currentCat || currentCat === 'all') ? 'active' : '' %>">All</a>
      <a href="/shop?cat=shirts"        class="ll-filter-tab <%= currentCat === 'shirts'      ? 'active' : '' %>">ğŸ‘• Shirts</a>
      <a href="/shop?cat=hoodies"       class="ll-filter-tab <%= currentCat === 'hoodies'     ? 'active' : '' %>">ğŸ§¥ Hoodies</a>
      <a href="/shop?cat=footwear"      class="ll-filter-tab <%= currentCat === 'footwear'    ? 'active' : '' %>">ğŸ‘Ÿ Footwear</a>
      <a href="/shop?cat=towels"        class="ll-filter-tab <%= currentCat === 'towels'      ? 'active' : '' %>">ğŸ–ï¸ Towels</a>
      <a href="/shop?cat=homewares"     class="ll-filter-tab <%= currentCat === 'homewares'   ? 'active' : '' %>">ğŸª´ Home Decor</a>
      <a href="/shop?cat=accessories"   class="ll-filter-tab <%= currentCat === 'accessories' ? 'active' : '' %>">âœ¨ Accessories</a>
    </div>

    <!-- Category overview grid â€” shows on "All" only -->
    <% if (!currentCat || currentCat === 'all') { %>
    <div class="ll-section-title">Browse by Category</div>
    <p class="ll-section-sub">Tropically inspired. Beautifully made.</p>

    <div class="ll-categories-grid">
      <a href="/shop?cat=shirts" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸ‘•</span>
        <div class="ll-cat-name">Shirts</div>
        <div class="ll-cat-count">Tees, tanks &amp; button-ups</div>
      </a>
      <a href="/shop?cat=hoodies" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸ§¥</span>
        <div class="ll-cat-name">Hoodies &amp; Sweats</div>
        <div class="ll-cat-count">Beach evenings sorted</div>
      </a>
      <a href="/shop?cat=footwear" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸ‘Ÿ</span>
        <div class="ll-cat-name">Footwear</div>
        <div class="ll-cat-count">Slides, sneakers &amp; sandals</div>
      </a>
      <a href="/shop?cat=towels" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸ–ï¸</span>
        <div class="ll-cat-name">Towels &amp; Beach</div>
        <div class="ll-cat-count">Oversized &amp; glorious</div>
      </a>
      <a href="/shop?cat=homewares" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸª´</span>
        <div class="ll-cat-name">Home Decor</div>
        <div class="ll-cat-count">Bring the beach inside</div>
      </a>
      <a href="/shop?cat=accessories" class="ll-cat-card">
        <span class="ll-cat-icon">ğŸŒº</span>
        <div class="ll-cat-name">Accessories</div>
        <div class="ll-cat-count">Bags, hats &amp; more</div>
      </a>
    </div>
    <% } %>

    <!-- Printful products -->
    <div class="ll-section-title" style="margin-top:2rem;">
      <% if (currentCat && currentCat !== 'all') { %>
        <%= currentCat.charAt(0).toUpperCase() + currentCat.slice(1) %>
      <% } else { %>
        All Products
      <% } %>
    </div>
    <p class="ll-section-sub">Ships worldwide Â· Print-on-demand Â· Made when you order</p>

    <% if (products && products.length > 0) { %>
    <div class="ll-products-grid">
      <% products.forEach(function(product) { %>
      <div class="ll-product-card">
        <div class="ll-product-img">
          <% if (product.thumbnail_url) { %>
            <img src="<%= product.thumbnail_url %>" alt="<%= product.name %>">
          <% } else { %>
            <span class="product-emoji">ğŸ›ï¸</span>
          <% } %>
        </div>
        <div class="ll-product-info">
          <div class="ll-product-name"><%= product.name %></div>
          <div class="ll-product-variants">
            <%= product.variant_count %> variant<%= product.variant_count !== 1 ? 's' : '' %>
          </div>
          <div class="ll-product-footer">
            <div class="ll-product-price">
              <% if (product.price) { %>
                From $<%= product.price.toFixed(2) %>
              <% } else { %>
                â€”
              <% } %>
            </div>
            <button
              class="ll-add-btn"
              data-product-id="<%= product.id %>"
              data-product-name="<%= product.name %>"
              title="Add to cart"
            >+</button>
          </div>
        </div>
      </div>
      <% }); %>
    </div>

    <% } else { %>
    <div class="ll-loading">
      <div class="ll-loading-spinner"></div>
      <p>Loading products from our store...</p>
      <p style="font-size:0.8rem;margin-top:0.5rem;opacity:0.7;">
        If this persists, the Printful API key may need checking in Railway.
      </p>
    </div>
    <% } %>

  </div><!-- /ll-shop-section -->

  <!-- â•â• AFFILIATES BLOCK â•â• -->
  <section class="ll-affiliates">
    <div class="ll-affiliates-inner">
      <h2>Treat Yourself âœ¨</h2>
      <p class="ll-affiliates-sub">
        Life is too short for bad chairs and cold rooms. Handpicked premium picks â€” because you deserve the finest.
      </p>

      <div class="ll-affiliates-grid">

        <a href="#" class="ll-affiliate-card">
          <span class="ll-affiliate-icon">ğŸ§–</span>
          <div class="ll-affiliate-name">Infrared Sauna</div>
          <div class="ll-affiliate-desc">
            Full-spectrum infrared therapy. Ships and installs across Europe and North America. The ultimate recovery.
          </div>
          <span class="ll-affiliate-commission">Up to $1,000 commission</span>
        </a>

        <a href="#" class="ll-affiliate-card">
          <span class="ll-affiliate-icon">ğŸª‘</span>
          <div class="ll-affiliate-name">Ergonomic Chair</div>
          <div class="ll-affiliate-desc">
            Because your back is your most important asset when you work from the beach.
          </div>
          <span class="ll-affiliate-commission">Up to $200 commission</span>
        </a>

        <a href="#" class="ll-affiliate-card">
          <span class="ll-affiliate-icon">ğŸ’†</span>
          <div class="ll-affiliate-name">Massage Chair</div>
          <div class="ll-affiliate-desc">
            Zero-gravity full-body massage. Ships to US, UK and EU. Better than a nap (almost).
          </div>
          <span class="ll-affiliate-commission">Up to $350 commission</span>
        </a>

        <!-- LIZZY â€” research beach property affiliate program + add link -->
        <a href="#" class="ll-affiliate-card">
          <span class="ll-affiliate-icon">ğŸŒ´</span>
          <div class="ll-affiliate-name">Beach Property</div>
          <div class="ll-affiliate-desc">
            Your dream property, somewhere warm. [Affiliate program TBC]
          </div>
          <span class="ll-affiliate-commission">Commission TBC</span>
        </a>

      </div>
    </div>
  </section>

  <!-- â•â• SEASONAL BLOCK â•â• -->
  <section class="ll-seasonal">
    <div class="ll-seasonal-inner">

      <div class="ll-seasonal-header">
        <h2>Seasonal &amp; Special Editions ğŸ„</h2>
        <span class="ll-seasonal-badge">ğŸŒŸ Seasonal</span>
      </div>
      <p class="ll-section-sub">
        Their own world â€” never mixed with the surf shop. Christmas, gifting, novelty, and the wildly random stuff that makes life interesting.
      </p>

      <div class="ll-categories-grid">
        <a href="/shop?cat=christmas" class="ll-cat-card">
          <span class="ll-cat-icon">ğŸ„</span>
          <div class="ll-cat-name">Christmas &amp; Festive</div>
          <div class="ll-cat-count">Decor, gifts &amp; ornaments</div>
        </a>
        <a href="/shop?cat=colouring" class="ll-cat-card">
          <span class="ll-cat-icon">ğŸ¨</span>
          <div class="ll-cat-name">Colouring &amp; Drawing</div>
          <div class="ll-cat-count">Guides, books &amp; art supplies</div>
        </a>
        <a href="/shop?cat=novelty" class="ll-cat-card">
          <span class="ll-cat-icon">ğŸ’</span>
          <div class="ll-cat-name">Novelty Gifts</div>
          <div class="ll-cat-count">Puzzles, proposal kits &amp; fun stuff</div>
        </a>
        <a href="/shop?cat=seasonal" class="ll-cat-card">
          <span class="ll-cat-icon">ğŸŒ¸</span>
          <div class="ll-cat-name">Other Seasonal</div>
          <div class="ll-cat-count">Whatever the moment calls for</div>
        </a>
      </div>

    </div>
  </section>

<%- include('partials/footer') %>
